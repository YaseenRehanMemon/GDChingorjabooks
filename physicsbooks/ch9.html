<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 9: Capacitors</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* 1. CSS Variables for Theming */
        :root {
            /* Light Theme */
            --bg-color: #f4f7f9;
            --text-color: #333;
            --header-bg: #ffffff;
            --sidebar-bg: #ffffff;
            --card-bg: #ffffff;
            --accent-color: #007bff;
            --border-color: #e0e0e0;
            --shadow-color: rgba(0, 0, 0, 0.05);
            --table-header-bg: #f1f1f1;
            --theme-toggle-bg: #e0e0e0;
            --theme-toggle-slider: #fff;
            --theme-sun-color: #f39c12;
            --theme-moon-color: #7f8c8d;
        }

        /* 2. Base Styles */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .page-container {
            display: grid;
            grid-template-columns: 240px 1fr;
            grid-template-rows: auto 1fr;
            grid-template-areas:
                "header header"
                "sidebar content";
            min-height: 100vh;
        }

        h1, h2, h3, h4 {
            color: var(--accent-color);
            font-weight: 600;
        }

        h1 { font-size: 2rem; }
        h2 { font-size: 1.75rem; border-bottom: 2px solid var(--border-color); padding-bottom: 10px; margin-top: 40px; }
        h3 { font-size: 1.4rem; }
        h4 { font-size: 1.1rem; }

        p, li {
            font-size: 1rem;
        }

        a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color 0.2s;
        }
        a:hover {
            text-decoration: underline;
        }

        /* 3. Header */
        header {
            grid-area: header;
            background-color: var(--header-bg);
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 5px var(--shadow-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        /* 4. Sidebar Navigation */
        .sidebar {
            grid-area: sidebar;
            background-color: var(--sidebar-bg);
            padding: 2rem;
            border-right: 1px solid var(--border-color);
            position: sticky;
            top: 75px; /* Height of header */
            height: calc(100vh - 75px);
            overflow-y: auto;
        }

        .sidebar h2 {
            margin-top: 0;
            border-bottom: none;
            font-size: 1.5rem;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar li a {
            display: block;
            padding: 0.5rem 0;
            color: var(--text-color);
            font-weight: 400;
            border-left: 3px solid transparent;
            padding-left: 10px;
        }

        .sidebar li a:hover {
            color: var(--accent-color);
            background-color: var(--bg-color);
            border-left: 3px solid var(--accent-color);
            text-decoration: none;
        }

        /* 5. Main Content */
        .content {
            grid-area: content;
            padding: 2rem 3rem;
        }

        section {
            margin-bottom: 40px;
        }

        /* 6. Components (Cards, Tables) */
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1rem;
            box-shadow: 0 4px 8px var(--shadow-color);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px var(--shadow-color);
        }

        .card.formula {
            background-color: var(--sidebar-bg);
            border-left: 5px solid var(--accent-color);
            font-family: monospace;
            font-size: 1.1rem;
        }

        .card ul, .card ol {
            padding-left: 20px;
        }

        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }

        th, td {
            text-align: left;
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        thead {
            background-color: var(--table-header-bg);
            font-weight: 600;
        }

        tbody tr:hover {
            background-color: var(--bg-color);
        }

        /* 7. Theme Toggle Switch */
        .theme-toggle-checkbox {
            display: none; /* Hide the actual checkbox */
        }

        .theme-toggle-label {
            background: var(--theme-toggle-bg);
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 5px;
            position: relative;
            height: 26px;
            width: 50px;
        }

        .theme-toggle-label .sun, .theme-toggle-label .moon {
            font-size: 14px;
            line-height: 1;
        }
        .theme-toggle-label .sun { color: var(--theme-sun-color); }
        .theme-toggle-label .moon { color: var(--theme-moon-color); }

        .theme-toggle-label::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 4px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--theme-toggle-slider);
            transition: transform 0.3s ease;
        }

        .theme-toggle-checkbox:checked + .page-container {
            /* This empty selector is for specificity to trigger theme change */
        }

        /* Logic to apply dark mode to the body */
        .theme-toggle-checkbox:checked ~ .page-container {
            --bg-color: #1a1a2e;
            --text-color: #e0e0e0;
            --header-bg: #162447;
            --sidebar-bg: #162447;
            --card-bg: #1f4068;
            --accent-color: #17e9e0;
            --border-color: #3a3a5a;
            --shadow-color: rgba(0, 0, 0, 0.2);
            --table-header-bg: #1f4068;
            --theme-toggle-bg: #1f4068;
            --theme-toggle-slider: #1a1a2e;
            --theme-sun-color: #bdc3c7;
            --theme-moon-color: #f1c40f;
        }

        .theme-toggle-checkbox:checked ~ .page-container .theme-toggle-label::after {
            transform: translateX(24px);
        }


        /* 8. Responsive Design */
        @media (max-width: 768px) {
            .page-container {
                grid-template-columns: 1fr;
                grid-template-areas:
                    "header"
                    "sidebar"
                    "content";
            }

            .sidebar {
                position: static;
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                padding: 1rem;
            }

            .sidebar h2 {
                display: none;
            }

            .sidebar ul {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                justify-content: center;
            }
            
            .sidebar li a {
                padding: 8px 12px;
                border-radius: 20px;
                border-left: none;
                background-color: var(--bg-color);
            }

            .sidebar li a:hover {
                background-color: var(--accent-color);
                color: var(--header-bg);
            }

            header {
                padding: 1rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .content {
                padding: 1.5rem;
            }
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggleCheckbox = document.getElementById('theme-toggle-checkbox');
            const body = document.body;

            function applyTheme(isDarkMode) {
                if (isDarkMode) {
                    body.classList.add('dark-mode');
                } else {
                    body.classList.remove('dark-mode');
                }
            }

            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (savedTheme === 'dark') {
                themeToggleCheckbox.checked = true;
                applyTheme(true);
            } else if (savedTheme === 'light') {
                themeToggleCheckbox.checked = false;
                applyTheme(false);
            } else {
                themeToggleCheckbox.checked = prefersDark;
                applyTheme(prefersDark);
            }

            themeToggleCheckbox.addEventListener('change', () => {
                const isDarkMode = themeToggleCheckbox.checked;
                applyTheme(isDarkMode);
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            });
        });

        // MathJax configuration for rendering LaTeX
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <!-- MathJax CDN for rendering LaTeX -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
    <input type="checkbox" id="theme-toggle" class="theme-toggle-checkbox">
    
    <div class="page-container">
        <header>
            <h1>Chapter 9: Capacitors</h1>
            <label for="theme-toggle" class="theme-toggle-label">
                <span class="sun">Light</span>
                <span class="moon">Dark</span>
            </label>
        </header>

        <nav class="sidebar">
            <h2>Navigation</h2>
            <ul>
                <li><a href="#intro">What is a Capacitor?</a></li>
                <li><a href="#parallel-plate">The Parallel Plate Capacitor</a></li>
                <li><a href="#combinations">Combinations of Capacitors</a></li>
                <li><a href="#energy">Energy Storage</a></li>
                <li><a href="#rc-circuits">RC Circuits</a></li>
                <li><a href="#summary">Chapter Summary</a></li>
            </ul>
        </nav>

        <main class="content">
            <section id="intro">
                <h2>What is a Capacitor?</h2>
                <p>A <b>capacitor</b> is a fundamental electronic component designed to store electric charge and energy. In its simplest form, it consists of two conductive plates separated by an insulating material called a <b>dielectric</b>.</p>
                <div class="card">
                    <h3>Capacitance (C)</h3>
                    <p>Capacitance is the measure of a capacitor's ability to store charge. It is defined as the ratio of the charge stored on one plate to the potential difference (voltage) between the plates.</p>
                </div>
                <div class="card formula">
                    <h4>Formula: C = Q / V</h4>
                    <p><b>C</b> = Capacitance (in Farads, F)<br>
                       <b>Q</b> = Magnitude of charge on one plate (in Coulombs, C)<br>
                       <b>V</b> = Voltage across the plates (in Volts, V)</p>
                </div>
                <p>A capacitor has a capacitance of one Farad if one Coulomb of charge is stored when the potential difference is one Volt. The Farad is a very large unit; more common units are the microfarad (&mu;F) and picofarad (pF).</p>
            </section>

            <section id="parallel-plate">
                <h2>The Parallel Plate Capacitor</h2>
                <p>The most common type of capacitor is the parallel plate capacitor. Its capacitance depends on its geometric properties and the material between its plates.</p>
                
                <div class="card formula">
                    <h4>Capacitance of a Parallel Plate Capacitor</h4>
                    <b>C = &epsilon;<sub>r</sub> &epsilon;₀ A / d</b>
                    <p><b>A</b> = Area of one of the plates<br>
                       <b>d</b> = Distance between the plates<br>
                       <b>&epsilon;₀</b> = Permittivity of free space (a constant)<br>
                       <b>&epsilon;<sub>r</sub></b> = The dielectric constant of the insulator</p>
                </div>

                <div class="card">
                    <h3>Dielectrics</h3>
                    <p>A <b>dielectric</b> is an insulating material placed between the capacitor plates. It serves three purposes:</p>
                    <ul>
                        <li>It keeps the conductive plates from touching.</li>
                        <li>It increases the maximum voltage the capacitor can withstand.</li>
                        <li>It <b>increases the capacitance</b> by a factor known as the dielectric constant (&epsilon;<sub>r</sub>).</li>
                    </ul>
                </div>
            </section>

            <section id="combinations">
                <h2>Combinations of Capacitors</h2>
                <p>Capacitors in a circuit can be combined in series or parallel to achieve a desired equivalent capacitance.</p>
                
                <table>
                    <thead>
                        <tr>
                            <th>Combination</th>
                            <th>Description</th>
                            <th>Equivalent Capacitance (C<sub>eq</sub>)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><b>Parallel</b></td>
                            <td>Plates are connected side-by-side. The voltage across each capacitor is the same. The total charge is the sum of the individual charges.</td>
                            <td><b>C<sub>eq</sub> = C₁ + C₂ + C₃ + ...</b></td>
                        </tr>
                        <tr>
                            <td><b>Series</b></td>
                            <td>Capacitors are connected end-to-end. The charge on each capacitor is the same. The total voltage is the sum of the individual voltages.</td>
                            <td><b>1/C<sub>eq</sub> = 1/C₁ + 1/C₂ + 1/C₃ + ...</b></td>
                        </tr>
                    </tbody>
                </table>
                 <p><b>Note:</b> These rules are the opposite of the rules for combining resistors!</p>
            </section>
            
            <section id="energy">
                <h2>Energy Stored in a Capacitor</h2>
                <p>Work is required to move charge onto the plates of a capacitor. This work is stored as electric potential energy in the electric field between the plates. This stored energy can be released quickly, which is why capacitors are used in applications like camera flashes.</p>
                
                <div class="card formula">
                    <h4>Formulas for Stored Energy (U)</h4>
                    <b>U = &frac12;QV = &frac12;CV² = Q² / 2C</b>
                </div>
            </section>

            <section id="rc-circuits">
                <h2>Charging and Discharging (RC Circuits)</h2>
                <p>When a capacitor is connected to a power source through a resistor, it does not charge instantly. The process is gradual and follows an exponential curve.</p>

                <div class="card">
                    <h3>The Time Constant (&tau;)</h3>
                    <p>The rate of charging or discharging is determined by the <b>time constant</b> of the circuit, which is the product of the resistance and the capacitance.</p>
                    <div class="card formula">
                        <b>&tau; = RC</b>
                    </div>
                    <p>The time constant represents the time it takes for the capacitor to charge to approximately <b>63.2%</b> of its maximum voltage, or to discharge to <b>36.8%</b> of its initial voltage.</p>
                </div>
            </section>

            <section id="summary">
                <h2>Chapter Summary</h2>
                <p>Capacitors are essential components in electronics for storing charge and energy.</p>
                <div class="card">
                    <ul>
                        <li>A capacitor stores charge, and its ability to do so is measured by its <b>capacitance (C = Q/V)</b>.</li>
                        <li>The capacitance of a parallel plate capacitor depends on its plate area (A), the distance between them (d), and the <b>dielectric</b> material used (<b>C = &epsilon;A/d</b>).</li>
                        <li>Capacitors in <b>parallel add directly</b> (C<sub>eq</sub> = C₁ + C₂), while capacitors in <b>series add as reciprocals</b> (1/C<sub>eq</sub> = 1/C₁ + 1/C₂).</li>
                        <li>The energy stored in a capacitor is given by <b>U = &frac12;CV²</b>.</li>
                        <li>The charging and discharging of a capacitor through a resistor is governed by the <b>time constant (&tau; = RC)</b>.</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>
</body>
</html>
